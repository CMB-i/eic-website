@import "tailwindcss";
@import "tw-animate-css";

/* Dark variant driven by html[data-theme="dark"] (not class-based). */
@custom-variant dark (&:is([data-theme="dark"] *));

@theme inline {
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);

  /* Core tokens (EIC). Map to Tailwind utilities like bg-background / text-text. */
  --color-background: var(--background);
  --color-surface: var(--surface);
  --color-border: var(--border);
  --color-text: var(--text);
  --color-muted: var(--muted);
  --color-accent: var(--accent);
  --color-accent-foreground: var(--accent-foreground);
  --color-glow: var(--glow);

  /* Convenience aliases (keeps future shadcn/ui add-ons easy). */
  --color-foreground: var(--text);
  --color-card: var(--surface);
  --color-card-foreground: var(--text);
  --color-popover: var(--surface);
  --color-popover-foreground: var(--text);
  --color-input: var(--border);
  --color-ring: var(--glow);

  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

:root {
  --radius: 0.625rem;

  /* Default theme = light (persisted theme applied via html[data-theme]). */
  --background: oklch(0.99 0.01 95);
  --surface: oklch(0.995 0.006 95);
  --border: oklch(0.9 0.01 95 / 70%);
  --text: oklch(0.2 0.02 265);
  --muted: oklch(0.52 0.03 265);

  /* Accent vibe: butter yellow glow on dark + clean light mode */
  --accent: oklch(0.84 0.17 92);
  --accent-foreground: oklch(0.15 0.02 265);

  /* Glow is used for rings + subtle highlights. */
  --glow: oklch(0.86 0.19 92 / 70%);

  /* Elevation + glass */
  --shadow: 0 20px 60px oklch(0.1 0.02 265 / 10%);
  --glass: oklch(1 0 0 / 65%);
}

html[data-theme="dark"] {
  color-scheme: dark;
  --background: oklch(0.12 0.02 265);
  --surface: oklch(0.17 0.02 265);
  --border: oklch(0.92 0.02 95 / 12%);
  --text: oklch(0.97 0.01 95);
  --muted: oklch(0.74 0.02 95 / 70%);

  --accent: oklch(0.9 0.2 94);
  --accent-foreground: oklch(0.13 0.02 265);
  --glow: oklch(0.9 0.22 94 / 75%);

  --shadow: 0 30px 90px oklch(0.02 0.01 265 / 55%);
  --glass: oklch(0.18 0.02 265 / 55%);
}

html[data-theme="light"] {
  color-scheme: light;
}

@layer base {
  * {
    @apply border-border outline-ring/40;
  }
  html,
  body {
    height: 100%;
  }
  body {
    @apply bg-background text-text;
    text-rendering: geometricPrecision;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* -------- EIC ambient background (gradient + glow + noise) -------- */
:root {
  --eic-bg-1: radial-gradient(
    1200px circle at 15% 10%,
    oklch(from var(--glow) l c h / 35%),
    transparent 55%
  );
  --eic-bg-2: radial-gradient(
    900px circle at 80% 30%,
    oklch(from var(--accent) l c h / 22%),
    transparent 55%
  );
  --eic-bg-3: radial-gradient(
    900px circle at 55% 85%,
    oklch(0.7 0.15 260 / 18%),
    transparent 55%
  );
  --eic-bg-4: linear-gradient(
    135deg,
    oklch(from var(--background) l c h),
    oklch(from var(--background) calc(l + 0.02) c h)
  );
}

body::before {
  content: "";
  position: fixed;
  inset: -20%;
  z-index: -1;
  pointer-events: none;
  background-image: var(--eic-bg-1), var(--eic-bg-2), var(--eic-bg-3), var(--eic-bg-4);
  background-size: 120% 120%;
  background-position: 0% 0%;
  opacity: 0.95;
  transform: translate3d(0, 0, 0);
  will-change: transform, opacity, background-position;
  animation: eic-ambient 18s ease-in-out infinite alternate;
}

/* Tiny SVG noise (data-uri) to avoid an extra asset request. */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;
  opacity: 0.06;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  background-size: 160px 160px;
}

@media (prefers-reduced-motion: reduce) {
  body::before {
    animation: none;
  }
}

@keyframes eic-ambient {
  0% {
    transform: translate3d(-1%, -1%, 0) scale(1.02);
    background-position: 0% 0%;
  }
  100% {
    transform: translate3d(1%, 1%, 0) scale(1.04);
    background-position: 100% 100%;
  }
}

/* Utility surface: used sparingly (pill bar + select surfaces). */
.eic-glass {
  background: var(--glass);
  box-shadow: var(--shadow);
  backdrop-filter: blur(14px);
}
